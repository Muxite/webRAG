# EFS Mount Target IDs

## How Mount Target IDs Are Determined

Mount target IDs in AWS EFS are **automatically generated by AWS** when you create a mount target. You do not specify or choose them.

### ID Format
- **Prefix**: `fsmt-` (EFS Mount Target)
- **Suffix**: Hexadecimal string (e.g., `03472eacc4900fa38`)
- **Example**: `fsmt-03472eacc4900fa38`

### Creation Process

1. **You call `create_mount_target()`** with:
   - `FileSystemId`: The EFS file system ID
   - `SubnetId`: The subnet where the mount target will be created
   - `SecurityGroups`: Security groups for the mount target (optional)
   - `IpAddress`: Specific IP address (optional)

2. **AWS automatically assigns**:
   - A unique mount target ID (`fsmt-...`)
   - An IP address in the subnet's CIDR range (if not specified)
   - A network interface (ENI) for the mount target

3. **The mount target goes through lifecycle states**:
   - `creating`: Mount target is being created
   - `available`: Mount target is ready to use
   - `updating`: Mount target is being updated
   - `deleting`: Mount target is being deleted
   - `deleted`: Mount target has been deleted

### Important Notes

- **One mount target per subnet**: You can only have one mount target per subnet for a given EFS file system
- **Required for ECS**: ECS tasks must have mount targets in the same subnets where tasks run
- **Lifecycle state matters**: Tasks can only mount EFS when mount targets are in `available` state

### Retrieving Mount Target IDs

Mount target IDs are returned in the API response when you:
- Call `describe_mount_targets(FileSystemId=...)` - lists all mount targets for a file system
- Call `describe_mount_targets(MountTargetId=...)` - gets details for a specific mount target
- Call `create_mount_target(...)` - returns the newly created mount target ID

### In This Codebase

The `efs_manager.py` module handles mount target creation:
- `create_mount_target()`: Creates a mount target and returns the AWS-assigned ID
- `find_mount_target_for_subnet()`: Finds existing mount target by subnet ID
- `ensure_mount_targets()`: Ensures mount targets exist for all specified subnets

The mount target IDs are stored and used for:
- Security group configuration
- Network interface identification
- ECS task definition EFS volume configuration
